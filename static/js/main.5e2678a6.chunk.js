(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{13:function(e,t,n){"use strict";n.r(t),n.d(t,"setAlert",(function(){return o}));var a=n(84),s=n(20),c=s.SET_ALERT,r=s.REMOVE_ALERT,o=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3500;return function(s){var o=Object(a.a)();s({type:c,payload:{msg:e,alertType:t,id:o}}),setTimeout((function(){return s({type:r,payload:o})}),n)}}},20:function(e,t,n){"use strict";n.r(t),n.d(t,"SET_ALERT",(function(){return a})),n.d(t,"REMOVE_ALERT",(function(){return s})),n.d(t,"SIGNIN_SUCCESS",(function(){return c})),n.d(t,"SIGNIN_FAIL",(function(){return r})),n.d(t,"LOGOUT",(function(){return o})),n.d(t,"SET_USER",(function(){return i}));var a="SET_ALERT",s="REMOVE_ALERT",c="SIGNIN_SUCCESS",r="SIGNIN_FAIL",o="LOGOUT",i="SET_USER"},33:function(e,t,n){"use strict";n.r(t),t.default="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAc4AAAHOCAMAAAAmOBmCAAAAM1BMVEUyicg9j8pJlcxUm85godBrp9J3rdSCs9aNudiZv9ukxd2wy9+70eHH1+PS3eXe4+fp6elALxDWAAAMG0lEQVR42u3da7qkKgyF4aiUhYrA/Ed7fvT96e7Te3sjJN+aQfkWEKKiVGIowiWAk8BJ4CRwwkngJHASOAmccBI4CZwETgInnAROAieBk8AJJ4GTwEngJHDCSeAkcBI4CZxwEjgJnAROAiecBE4CJ4ETTgIngZPASeCEk8BJ4CRwEjjhJHASOAmcBE44CZwETgIngRNOAieBk8BJvHCmtMY4h18zx7ikVODsyHGNYZL/zxTiYlHVFGdJ8TXKxzOGuBU4NSav8yRHMs5rhlNVtvcoZzLORkapGBiWL7kiYclwtl4tl0muy9S9aNecF43LX8boWuBskX0e5I4M8w7n4wMzyH2Zuh2iXXKWOMq9GWKG86FS9j3IA5kznA9gzvJUOgQVMC2BdsVZ4iAPZy5w3pTlcUwRGWKB84akUdpk3OC8fNF8SbuEDGf/8+xPiXBe2M+bpHXGBOdFiaIh7wKnjaH5dYDucHa/ava1girnLC/RlFDgPDPRjqIrQ4LzcFbRlwjnwcyiMa8C55FlcxKdmXY4+182f1pAdzg/mTSI4qxwdl8E/ZwFzs/0DkR7Zjg7L2l78BQ0LXkKmpY6foLm8Q1ogdOOpsgLTkOaCtdPQdOSpy7OVQRPM5z9aWrr92ni3EXwNMO5D11yqrq/oodT7f3Nf3pmOH9PkF6jqJ2ghvMt/WaG00BRq/D2pxLOTsug79nhtFAGfS+HCpw2Fk5V3XgVnJv0nwXOb1PtYIBTRzdBA2cQC5ngrLX28NjexxLhrLXmwQinht1Ke86XFU0N021zzk3sZHHPWQZDnO3vrbTmfIulvJxzZrGV5JszGOMcXXMmsZbVM+dojrPxrZWmnKvYS/TLORrkbDs8W3JGEYanGU5THQQlw1MYnJaGp7ByWhqe7ThXEYanHc7RLGfD4dmMcxO7Wf1xBsOcozvOLJazeeOcTXO+nHEabSF8T/bFudrWbLZXacQ5GeccXXFmsZ7NE+fbPOfsiXM0zzk44txFmG3tcL4dcM5+OEcHnIMbTg9zbaPZtgVndME5e+GcXHCOTjiL+Mjug3N1wrn44JydcAYfnKMTTnHBmb1otnjZU1g6Ld30FJZOS4vn85yTG87BA6f4yW6fMzniXO1zLo44o33O2RFnsM8ZHHEO9jnFU4p1zuyKM1nnTK44F+uc0RVnhNNSXtY5gyvOACc7lY44B1ecYp3Tl+bjr+0+zFmccSbbnAlOOLlFBqfLPsLDnAucljgjnHDCCaeKzHDStIUTTjjhhBNOOOGEE0444aSNACeccFrj3ODkfieccKqI8YdLdjgtcVY44ew31TjnBKclTl/vqEzWOWdXnObfIPPVFnpb51xdcZp/+9pXH2Gzzulrp7Kb5xw9cVbznJ52KpN9Tk+l7Wyf09MdTwcnZno6xS3Z5/R0dkl1wOmnFpo8cPqphWYPnH76QqsHTj99oeyC08vi2eIDng04I0unJU4vT/NtPji97DyLE04fD5i0+BprE04fTyQsXjh9nIKavXDWFx0+S5wrc60lzsJca4nTwWzbZq5txLky11ritN9JKK44rXcSXtUVp/W+7eaL0/h7nmN1xmm7GIreOG0XQ9kdp+Wb2HN1x2n58endH6fhvUqoDjntDs/kkdNs47bh4GzJmRicljiNPnDbcnA25dwZnJY4TRa3TQdnW87M4LTEWd/cGbPEWcx1brNnTnMfT35X15zGTo0ainNOW72EtTrnNNXqC9U9p6VqKMNp6DGTWOG007qdKpy11mxkut3hNDTdKphqdXCaqG5DhfNbddt/M2HIcBpqJmwVzh/p/anbucJpZ7cyVTjtLJ9KFk5FnHXvePeZKpx2dp9LhdNOOTRXOP+UPh/sCxXOP6fHV7KnAuffytv+PAdVmro4+7uXPewVTjPbFW2a2jj78lSnqY6zK8+twmnHc61wmvEcUoXTjKe+dVMrZ91HNA1x6u8njDo1lXLWovt2tq7Onn5O3f34l1ZNvZyKX/2c1V4zxZx1U1rgrhXOQwXuRElriLMWfY/Hh1LhNLOARt2XSzunro6Cyr5eV5y1zOxPDHGqqXCHRf+l6oFTR0UUcoXzqgHaegUd1i6uUyectbQ9vW8uFc5rS9x2Tfkp9XKR+uGsdR0pgQxx1hIb1LixVDitLKFz7ur6dMZZa57BNMT5IGh/mD1yPrOGDj1i9slZa7m5yh37KoB656y1pvs6f2Hr9aL0y1lrXsZbBmbu95L0zFlr3d/DxStm6vp6dM5Za93m8TLLrfeL0T9nrXWP558Rm97JwJUwwVlrLeuJQTrOa7ZxGaxw1lpr3t7hwKg0Q2mM88vEu8bwsXE6hPeajP16c5xfN6VbjOEvrEMI77glk7/bKOePCTj9mmz751rn9BY44SRwEg+c+T1uJq7kDmddJ5H236S9IouMb99fCMzf74eE0jnm1/cuXsktZ5q7etXu/yfa7x2LcXXJmUJnL8L+/0T78z+z5YMpogNTRKZeOza/nYHUEFSUYPb29sCP/On102agz3Pm0PPrzb8NzVnVmy2i5Od/vQi9bUHT32/GNdlOP8z5zweeX9nA0Py2/dptc6YP3FjuaAX996EN72KX86NnkIS9C8z8kSdZnl49RNF/ud2f+sB/86NfTHv2iIynOD93+oj6kyU+cfbGo6uHqBuaHZxH8MlzGh4coKJvaGo/yOfzL5g+t4I+wZkOPtGs8hXLcugzo0+dZPMA54nPrKqriQ6/KfzQtwBu5zx3SP+g6r3ZU699LxY4T3/iRs9b7Wff4X9iwr2Z85Lvk6sAzfPpV0kfuAV4L+dVh4yE1tuWdMkvuf+Zizs5r/y2zbg2XETXy74xsPbLefGHFoa5TS83X/rC/twr5w3f+ZseH6Jlvfqgzntv0d/GucotefT8gjTfcB7Vrd8vk740HzxdZH/fdBTVnR2Fmzij3Jnx9jF6m6XIrR9Kuofz/lMQh/m2dbRs881n/t3nKX1qflmF4vXT7r48cUj5bRtQ6VfzS6F4Iem+vB47znrthvPxzxKF95ZPT7Dx4U8HrJ1wtvnI1BDiemxF2rePHl3TgafY0Py2moa4pI+q5rTGV8NPhK4dcKr4ANwQwjvGlP4gm1NKS4whtP+w2R31rRjU7CU3eF7LGTFq63kp54rQJz2zYk40m/fjL+TcB3haewqabTPr5CwTNO09L+NEU0M74SpONpzHk9RxLqCo2K5cw5kw0VHeXsKZKWrP5aWKkzLobBZFnJRBasqhCzjp7V1RDhUlnHSDLknQwUk36KJEFZwsnJqWz7OcGwyals+TnOw4de0+T3IGEFTtPs9x0qpV1rw9xbkjcHHztiknexRtu5UznDyGeX32ZpxMtfqmW2GqtTTdClWtsuQmnDQQbkpowkkDQWMz4SgnvVqVvduDnGXkst+W+XHONxf9xqSHOTOXXOfmU6iDLFVDQh1kqRo6xEkdpLUaOsJJ6/3+7I9xFvpBantDBzh5du+JbA9xskl5JONDnC8u9SNZH+HkVU7NmxWhg6A18QFOBqfq4SkMTkvDUxicloanMDgtDU9hcFoansLgtDQ8hcFpaXgKg9PS8BQGp6XhKQxOS8PzE5zcSmkxPG/j5D5ni6w3cTI4m2S8iZMnhNpku4WTJ4QaJdzCyUGKrbLfwcmzta0y38BJC6FdyvWcPPDVRStB2KVY2qsIuxRLexWhENKf18WcvAHYNvlaTgqhToohoRCyVAx9iJMDvnophoRCyFIx9BFOjsbspjP0EU7uW7fPch0nt8baZ7qMk01nP1tPYdPZR94XcRYuZT9bz39z8hiCjuzXcDLXdjTbCnOtpdlWmGstzbbCXGtptv0nJ5exp9lW6CFYmm2Ffm03iec56dfqyXSak3tjmpLPcvJApqasZzn5CqCmvE5y0hJSleEkJy0hXUnnONmmdNYYEh7hs7RVEbYpPaWc4eRxaW3ZznByN6W3xVPo8FlaPIWl09LiKew6LS2ewq7T0uIp7Dq7SjjMScNWYw5zcjKUxqSjnNzr1JjlKCdNBI2Zj3JSCfXXSBAqIUu1kFAJWaqFhErIUi0k9IQs9YWEj+BY6gsJ7xp1luEQJ+fwaU05wklh22NpKzwn1FvWI5zsU7QmHuGkY6s1ryOc7FN63Kn8B8kqVqwX0jroAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAABJRU5ErkJggg=="},54:function(e,t,n){},55:function(e,t,n){},82:function(e,t,n){"use strict";n.r(t);var a=n(0),s=n(1),c=n.n(s),r=n(26),o=n.n(r),i=(n(54),n(55),n(8)),u=n(7),l=n(22),d=n(20),b=[],j=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b,t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload;switch(n){case d.SET_ALERT:return[].concat(Object(l.a)(e),[a]);case d.REMOVE_ALERT:return e.filter((function(e){return e.id!==a}));default:return e}},p=n(17),m=n(20),f=m.SIGNIN_FAIL,h=m.SIGNIN_SUCCESS,O=m.LOGOUT,x=m.SET_USER,g={isAuthenticated:null,user:null},v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g,t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload;switch(n){case h:return Object(p.a)(Object(p.a)({},e),{},{isAuthenticated:!0});case x:return Object(p.a)(Object(p.a)({},e),{},{user:a,isAuthenticated:!0});case f:case O:return Object(p.a)(Object(p.a)({},e),{},{isAuthenticated:null,user:null});default:return e}},N=(0,n(23).combineReducers)({alert:j,auth:v}),w=n(23),S=w.createStore,y=w.applyMiddleware,A=n(57).composeWithDevTools,k=[n(58).default],T=S(N,{},A(y.apply(void 0,k))),C=n(5),E=Object(C.b)((function(e){return{isAuthenticated:e.auth.isAuthenticated}}))((function(e){return e.isAuthenticated?Object(a.jsx)(u.a,{to:"/feed"}):Object(a.jsxs)("div",{className:"landing container",children:[Object(a.jsxs)("header",{children:[Object(a.jsx)("span",{children:"Just Another Social Media"})," is just another social media in the web, which is produced mainly as a full stack project for portfolio. So if you've come across this somehow, maybe play around with it...?"]}),Object(a.jsxs)("div",{className:"landing__links",children:[Object(a.jsx)(i.b,{to:"/login",className:"btn btn-secondary btn-lg",children:"Log in"}),Object(a.jsx)(i.b,{to:"/signup",className:"btn btn-secondary btn-lg",children:"Sign up"})]})]})})),I=n(2),L=n(6),z=n.n(L),P=n(10),D=n(47),F=n.n(D).a.create({baseURL:"https://just-another-social-media.herokuapp.com"}),X=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:sessionStorage.getItem("token");e?F.defaults.headers.common["x-auth-token"]=e:delete F.defaults.headers.common["x-auth-token"]},_=F,R=n(37);n(83);R.a.initializeApp({apiKey:"AIzaSyBJh1Mqj90Kcjf1OHZuRqw3PsXPgX0f_Fo",authDomain:"social-media-100.firebaseapp.com",projectId:"social-media-100",storageBucket:"social-media-100.appspot.com",messagingSenderId:"639281413828",appId:"1:639281413828:web:7c1e5a44854bab36d7d391"});var U=R.a.storage().ref(),G=function(){var e=Object(P.a)(z.a.mark((function e(t){var n;return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,U.child("User DP/"+t).getDownloadURL();case 3:return n=e.sent,e.abrupt("return",n);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",null);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),J=function(){var e=Object(P.a)(z.a.mark((function e(t){var n,a,s=arguments;return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=s.length>1&&void 0!==s[1]?s[1]:0,e.prev=1,e.next=4,U.child("User posts/".concat(n,"/").concat(t)).getDownloadURL();case 4:return a=e.sent,e.abrupt("return",a);case 8:return e.prev=8,e.t0=e.catch(1),e.abrupt("return",null);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}(),H=n(13).setAlert,B=n(20),Z=B.SIGNIN_SUCCESS,M=B.SIGNIN_FAIL,K=B.LOGOUT,W=B.SET_USER,q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:sessionStorage.getItem("userId");return function(){var t=Object(P.a)(z.a.mark((function t(n){var a;return z.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,_.get("/api/users/".concat(e));case 2:if(!(a=(a=t.sent).data).photo){t.next=8;break}return t.next=7,G(a.photo);case 7:a.photo=t.sent;case 8:n({type:W,payload:a});case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},V=function(e,t){return function(){var n=Object(P.a)(z.a.mark((function n(a){var s;return z.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,_.post("/api/users/login",{email:e,password:t});case 3:(s=n.sent).data.token?(X(s.data.token),sessionStorage.setItem("token",s.data.token),sessionStorage.setItem("userId",s.data.userId),a(q(s.data.userId)),a({type:Z}),a(H("Authenticated successfully","success"))):a(H("Something went wrong","danger")),n.next=11;break;case 7:n.prev=7,n.t0=n.catch(0),a({type:M}),n.t0.response?401===n.t0.response.status?a(H("Wrong credentials!","danger")):400===n.t0.response.status&&a(H("No email found","danger")):a(H("Something went wrong","danger"));case 11:case"end":return n.stop()}}),n,null,[[0,7]])})));return function(e){return n.apply(this,arguments)}}()},Q=function(){return function(e){X(null),sessionStorage.removeItem("token"),sessionStorage.removeItem("userId"),e({type:K})}},Y=Object(C.b)((function(e){return{alerts:e.alert}}))((function(e){var t=e.alerts,n=Object(s.useState)(!1),c=Object(I.a)(n,2),r=c[0],o=c[1];return Object(s.useEffect)((function(){o(!0),setTimeout((function(){o(!1)}),3e3)}),[t]),null!==t&&t.length>0?Object(a.jsx)("div",{className:"notifications ".concat(r&&"opacity-1"),children:t.map((function(e){return Object(a.jsx)("div",{className:"alert-".concat(e.alertType),children:e.msg},e.id)}))}):null})),$=n(13),ee=Object(C.b)((function(e){return{isAuthenticated:e.auth.isAuthenticated,user:e.auth.user}}),{logout:Q,setUser:q,setAlert:$.setAlert})((function(e){var t=e.logout,n=e.isAuthenticated,c=e.setUser,r=e.setAlert,o=e.user,u=Object(s.useState)(""),l=Object(I.a)(u,2),d=l[0],b=l[1],j=Object(s.useState)(null),p=Object(I.a)(j,2),m=p[0],f=p[1],h=Object(s.useState)(!1),O=Object(I.a)(h,2),x=O[0],g=O[1],v=Object(s.useState)(!1),N=Object(I.a)(v,2),w=N[0],S=N[1];Object(s.useEffect)((function(){sessionStorage.userId&&(X(),c())}),[c]);return Object(a.jsxs)("nav",{children:[Object(a.jsx)(i.b,{to:"/",children:Object(a.jsxs)("header",{children:["Just Another ",Object(a.jsx)("br",{}),"Social Media"]})}),n&&Object(a.jsx)("form",{style:w?{visibility:"visible"}:{},onSubmit:function(e){e.preventDefault(),_.post("/api/users/search",{searchTerm:d,userId:o.id}).then((function(e){return f(e.data)})).catch((function(e){return r(e.response.data,"warning")})),b("")},children:Object(a.jsx)("input",{value:d,onChange:function(e){return b(e.target.value)},className:"text-start form-control",type:"text",name:"search",placeholder:"Search for users. Try 'Ahmed'"})}),m&&Object(a.jsxs)("div",{onClick:function(){f(null),S(!1)},className:"searchDiv",children:[Object(a.jsx)("button",{className:"btn btn-warning btn-sm",children:"X"}),m.map((function(e){return Object(a.jsxs)(i.b,{to:"/profile/".concat(e.id),className:"searchDiv__user",children:[Object(a.jsx)("h4",{className:"text-start",children:e.name}),Object(a.jsx)("h6",{className:"text-start",children:e.email})]},e.id)}))]}),Object(a.jsxs)("div",{onClick:function(){return g(!1)},className:"navbtns ".concat(x&&"navbtns--activated"),children:[Object(a.jsx)(i.b,{to:"/about",children:Object(a.jsx)("button",{className:"btn btn-secondary",children:"About"})}),n&&o?Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(i.b,{to:"/profile/".concat(o.id),children:Object(a.jsx)("button",{className:"btn btn-secondary",children:"Profile"})}),Object(a.jsx)("button",{onClick:function(){t(),r("Logged out","success")},className:"btn btn-secondary",children:Object(a.jsx)("i",{className:"fa fa-sign-out fa-2x","aria-hidden":"true"})})]}):Object(a.jsx)(i.b,{to:"/login",children:Object(a.jsx)("button",{className:"btn btn-secondary",children:"Sign In"})})]}),Object(a.jsxs)("div",{className:"menu",children:[n&&Object(a.jsx)("i",{onClick:function(){return S(!w)},className:"fa fa-search fa-2x btn","aria-hidden":"true"}),Object(a.jsx)("i",{onClick:function(){return g(!x)},className:"fa fa-bars fa-2x btn","aria-hidden":"true"})]}),Object(a.jsx)(Y,{})]})})),te=Object(C.b)((function(e){return{isAuthenticated:e.auth.isAuthenticated}}),{login:V})((function(e){var t=e.isAuthenticated,n=e.login,c=Object(s.useState)(""),r=Object(I.a)(c,2),o=r[0],l=r[1],d=Object(s.useState)(""),b=Object(I.a)(d,2),j=b[0],p=b[1];return t?Object(a.jsx)(u.a,{to:"/feed"}):Object(a.jsx)("div",{className:"signin container",children:Object(a.jsxs)("form",{onSubmit:function(e){e.preventDefault(),n(o,j),l(""),p("")},children:[Object(a.jsx)("label",{htmlFor:"loginemail",children:"Enter email:"}),Object(a.jsx)("input",{value:o,onChange:function(e){return l(e.target.value)},className:"form-control text-start",type:"text",name:"loginemail",id:"loginemail",autoComplete:"username"}),Object(a.jsx)("label",{htmlFor:"loginpassword",children:"Enter password:"}),Object(a.jsx)("input",{value:j,onChange:function(e){return p(e.target.value)},className:"form-control text-start",type:"password",name:"loginpassword",id:"loginpassword",autoComplete:"current-password"}),Object(a.jsx)("input",{className:"btn btn-secondary mt-3",type:"submit",value:"Log in"}),Object(a.jsxs)("small",{className:"d-block text-start mt-2",children:["Don't have an account? ",Object(a.jsx)(i.b,{to:"/signup",children:"Create now"})]})]})})})),ne=Object(C.b)((function(e){return{isAuthenticated:e.auth.isAuthenticated}}),{login:V,setAlert:$.setAlert})((function(e){var t=e.isAuthenticated,n=e.login,c=e.setAlert,r=Object(s.useState)(""),o=Object(I.a)(r,2),l=o[0],d=o[1],b=Object(s.useState)(""),j=Object(I.a)(b,2),p=j[0],m=j[1],f=Object(s.useState)(""),h=Object(I.a)(f,2),O=h[0],x=h[1],g=Object(s.useState)(""),v=Object(I.a)(g,2),N=v[0],w=v[1];return t?Object(a.jsx)(u.a,{to:"/feed"}):Object(a.jsx)("div",{className:"signin container",children:Object(a.jsxs)("form",{onSubmit:function(e){e.preventDefault(),O!==N?c("Passwords do not match","warning"):(_.post("/api/users/new",{name:p,email:l,password:O}).then((function(e){c(e.data,"success"),n(l,O)})).catch((function(e){return c(e.response.data,"warning")})),d(""),m(""),x(""),w(""))},children:[Object(a.jsx)("label",{htmlFor:"signupemail",children:"Enter email:"}),Object(a.jsx)("input",{value:l,onChange:function(e){return d(e.target.value)},className:"form-control text-start",type:"text",name:"signupemail",id:"signupemail",autoComplete:"username"}),Object(a.jsx)("label",{htmlFor:"signupname",children:"Enter name:"}),Object(a.jsx)("input",{value:p,onChange:function(e){return m(e.target.value)},className:"form-control text-start",type:"text",name:"signupname",id:"signupname",autoComplete:"name"}),Object(a.jsx)("label",{htmlFor:"signuppassword",children:"Enter password:"}),Object(a.jsx)("input",{value:O,onChange:function(e){return x(e.target.value)},className:"form-control text-start",type:"password",name:"signuppassword",id:"signuppassword",autoComplete:"current-password"}),Object(a.jsx)("label",{htmlFor:"signuppassword2",children:"Enter password again:"}),Object(a.jsx)("input",{value:N,onChange:function(e){return w(e.target.value)},className:"form-control text-start",type:"password",name:"signuppassword2",id:"signuppassword2",autoComplete:"current-password"}),Object(a.jsx)("input",{className:"btn btn-secondary mt-3",type:"submit",value:"Sign up"}),Object(a.jsxs)("small",{className:"d-block text-start mt-2",children:["Already have an account? ",Object(a.jsx)(i.b,{to:"/login",children:"Login now"})]})]})})})),ae=n(48),se=Object(C.b)((function(e){return{isAuthenticated:e.auth.isAuthenticated}}))((function(e){var t=e.isAuthenticated,n=e.component,s=Object(ae.a)(e,["isAuthenticated","component"]);return Object(a.jsx)(u.b,Object(p.a)(Object(p.a)({},s),{},{render:function(e){return t?Object(a.jsx)(n,Object(p.a)({},e)):Object(a.jsx)(u.a,{to:"/"})}}))})),ce=n(29),re=n.n(ce),oe=function(e){var t=e.postId,n=e.handlePostDelete;return Object(a.jsxs)("div",{className:"post__modal",children:[Object(a.jsx)("p",{children:"Confirm delete: "}),Object(a.jsx)("button",{onClick:function(){return n(t)},className:"btn btn-sm btn-danger w-100 mt-1",children:"Delete"})]})},ie=Object(C.b)((function(e){return{user:e.auth.user}}))((function(e){var t=e.comment,n=e.user,c=e.handleDelete,r=e.postCreatorId,o=t.id,i=t.text,u=t.user_id,l=Object(s.useState)(null),d=Object(I.a)(l,2),b=d[0],j=d[1];if(Object(s.useEffect)((function(){t&&_.get("/api/users/".concat(u)).then((function(e){return j(e.data)}))}),[t]),b&&n){var p=b.name,m=n.is_staff,f=n.id;return Object(a.jsxs)("div",{className:"comment mb-1",children:[Object(a.jsx)("p",{className:"comment__user",children:p}),Object(a.jsx)("p",{className:"comment__text ms-2",children:i}),(u===f||r===f||m)&&Object(a.jsx)("i",{onClick:function(){return c(o)},className:"fa fa-trash-o btn btn-sm btn-danger"})]})}return null})),ue=Object(C.b)((function(e){return{user:e.auth.user}}),{setAlert:$.setAlert})((function(e){var t=e.post,c=e.user,r=e.handlePostDelete,o=e.setAlert,u=t.id,d=t.user_id,b=t.date_posted,j=t.photo,p=c.id,m=c.is_staff,f=Object(s.useState)(t.content),h=Object(I.a)(f,2),O=h[0],x=h[1],g=Object(s.useState)(null),v=Object(I.a)(g,2),N=v[0],w=v[1],S=Object(s.useState)(!1),y=Object(I.a)(S,2),A=y[0],k=y[1],T=Object(s.useState)(!1),C=Object(I.a)(T,2),E=C[0],L=C[1],D=Object(s.useState)(0),F=Object(I.a)(D,2),X=F[0],R=F[1],U=Object(s.useState)(null),H=Object(I.a)(U,2),B=H[0],Z=H[1],M=Object(s.useState)(null),K=Object(I.a)(M,2),W=K[0],q=K[1],V=Object(s.useState)(0),Q=Object(I.a)(V,2),Y=Q[0],$=Q[1],ee=Object(s.useState)(!1),te=Object(I.a)(ee,2),ne=te[0],ae=te[1],se=Object(s.useState)(null),ce=Object(I.a)(se,2),re=ce[0],ue=ce[1],le=Object(s.useState)([]),de=Object(I.a)(le,2),be=de[0],je=de[1],pe=Object(s.useState)(""),me=Object(I.a)(pe,2),fe=me[0],he=me[1],Oe=function(e){_.delete("/api/comments/".concat(e)).then((function(){je((function(t){return t.filter((function(t){return t.id!==e}))}))})).catch((function(e){return console.log(e.response.data)}))},xe=new Date(b);Object(s.useEffect)((function(){j&&J(j,d).then((function(e){return Z(e)})),_.get("/api/users/".concat(d)).then((function(e){w(e.data),e.data.photo&&G(e.data.photo).then((function(e){return q(e)}))})).catch((function(e){return console.log(e.response.data)})),_.get("/api/likes/".concat(u)).then((function(e){$(e.data.length),e.data.forEach((function(e){var t=e.id;e.user_id===p&&(ae(!0),ue(t))}))})).catch((function(e){return console.log(e.response.data)})),_.get("/api/comments/".concat(u)).then((function(e){return je(e.data)})).catch((function(e){return console.log(e.response.data)}))}),[t]);var ge=function(){var e=Object(P.a)(z.a.mark((function e(){var t;return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0===O.length){e.next=8;break}return L(!1),e.next=4,_.patch("/api/posts",{id:u,content:O});case 4:t=e.sent,o(t.data,"success"),e.next=9;break;case 8:o("Can't be empty","warning");case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return N?Object(a.jsxs)("div",{onClick:function(){return k(!1)},className:"post mt-2",children:[N.id===p||m?Object(a.jsxs)("div",{className:"post__actions d-flex",children:[Object(a.jsx)("i",{className:"btn btn-sm btn-info fa fa-pencil-square-o",onClick:function(e){e.stopPropagation(),R(e.target.parentNode.parentNode.childNodes[3].clientHeight),L(!E)},"aria-hidden":"true"}),Object(a.jsx)("i",{className:"btn btn-sm btn-danger fa fa-trash-o postDltBtn ml-2","aria-hidden":"true",onClick:function(e){e.stopPropagation(),k(!A)}})]}):null,A&&Object(a.jsx)(oe,{handlePostDelete:r,postId:u}),Object(a.jsxs)(i.b,{to:"/profile/".concat(N.id),className:"post__header d-flex",children:[Object(a.jsx)("img",{src:W||n(33).default,alt:N.name}),Object(a.jsx)("p",{className:"ml-2",children:N.name})]}),Object(a.jsx)("p",{className:"post__timestamp",children:xe.toLocaleDateString()}),E?Object(a.jsx)("textarea",{style:{height:X},value:O,className:"form-control mt-2",onChange:function(e){return x(e.target.value)},name:"content"}):Object(a.jsx)("div",{className:"post__content text-start mt-2",children:O}),j?Object(a.jsx)("div",{className:"post__image",children:Object(a.jsx)("img",{src:B,alt:"postphoto"})}):null,Object(a.jsxs)("div",{className:"post__comments",children:[Object(a.jsxs)("div",{className:"d-flex mt-2 align-items-center",children:[Object(a.jsx)("p",{children:"Comments:"}),Object(a.jsx)("form",{onSubmit:function(e){e.preventDefault(),_.post("/api/comments",{userId:p,postId:u,text:fe}).then((function(e){return je((function(t){return[].concat(Object(l.a)(t),[e.data])}))})).catch((function(e){return console.log(e.response.data)})),he("")},className:"w-50",children:Object(a.jsx)("input",{value:fe,onChange:function(e){return he(e.target.value)},type:"text",placeholder:"Add a comment"})})]}),be.length>0&&be.map((function(e){return Object(a.jsx)(ie,{handleDelete:Oe,comment:e,postCreatorId:d},e.id)}))]}),Object(a.jsx)("div",{className:"post__likes",children:Object(a.jsxs)("div",{onClick:function(){ne?_.delete("api/likes/".concat(re)).then((function(){ae(!1),$(Y-1)})).catch((function(e){return console.log(e.response.data)})):_.post("api/likes/",{userId:p,postId:u}).then((function(){ae(!0),$(Y+1)})).catch((function(e){return console.log(e.response.data)}))},children:[Object(a.jsx)("p",{children:Y}),Object(a.jsx)("i",{className:"fa fa-heart".concat(ne?"":"-o"," ms-1"),"aria-hidden":"true"})]})}),E&&Object(a.jsx)("button",{onClick:ge,className:"post__saveBtn btn btn-sm btn-primary",children:"Save"})]}):null})),le=Object(C.b)((function(e){return{user:e.auth.user}}),{setAlert:$.setAlert})((function(e){var t=e.user,c=e.setAlert,r=Object(s.useState)([]),o=Object(I.a)(r,2),i=o[0],u=o[1],d=Object(s.useState)(!0),b=Object(I.a)(d,2),j=b[0],p=b[1],m=Object(s.useState)(""),f=Object(I.a)(m,2),h=f[0],O=f[1],x=Object(s.useState)(null),g=Object(I.a)(x,2),v=g[0],N=g[1],w=function(){var e=Object(P.a)(z.a.mark((function e(){var n;return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_.post("/api/posts/feed",{id:t.id});case 2:n=e.sent,u(n.data),p(!1);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),S=function(){var e=Object(P.a)(z.a.mark((function e(t){var n,a;return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_.delete("/api/posts/",{data:{postId:t}});case 2:n=e.sent,a=i.filter((function(e){return e.id!==t})),u(a),c(n.data,"success");case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(s.useEffect)((function(){t&&w()}),[t]);return Object(a.jsx)("div",{className:"feed container",children:j||!t?Object(a.jsx)(re.a,{className:"m-auto",type:"cubes",color:"#c2c0b0",height:80,width:80}):Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)("form",{onSubmit:function(e){if(e.preventDefault(),""!==h){var n=new FormData;n.append("userId",t.id),n.append("content",h),n.append("image",v),_.post("/api/posts/",n).then((function(e){O(""),u([].concat(Object(l.a)(i),[e.data])),c("Content posted","success")}))}},children:[Object(a.jsxs)("div",{className:"feed__user pt-2 d-flex",children:[t.photo?Object(a.jsx)("img",{alt:t.name,src:t.photo}):Object(a.jsx)("img",{className:"me-3",alt:t.name,src:n(33).default}),Object(a.jsx)("p",{children:t.name})]}),Object(a.jsx)("div",{children:Object(a.jsxs)("div",{className:"feed__inputgroup",children:[Object(a.jsx)("textarea",{value:h,onChange:function(e){return O(e.target.value)},type:"text",placeholder:"Post something...",name:"content"}),Object(a.jsxs)("label",{className:"feedform__file btn btn-outline-secondary",htmlFor:"imagefile",children:["Add photo"," ",Object(a.jsx)("i",{className:"fa fa-file-image-o","aria-hidden":"true"}),Object(a.jsx)("input",{onChange:function(e){return N(e.target.files[0])},type:"file",id:"imagefile",name:"image",className:"d-none"})]}),Object(a.jsxs)("button",{className:"feedform__submit btn btn-primary",children:["Post ",Object(a.jsx)("i",{className:"fa fa-plus-square","aria-hidden":"true"})]})]})})]}),Object(a.jsx)("div",{className:"feed_posts mt-3",children:i.map((function(e){return Object(a.jsx)(ue,{handlePostDelete:S,post:e},e.id)}))})]})})})),de=function(){return Object(a.jsx)("div",{className:"about container",children:Object(a.jsxs)("p",{children:["Hello, this is Ahmed. This"," ",Object(a.jsx)("span",{className:"about__smedia",children:'"social-media"'})," site is developed in purpose of a full stack application. ExpressJS and Postgres is used in the server, and React in client. ",Object(a.jsx)("br",{}),"So basically we can create an account with some basic information, follow other accounts, create posts optionally with photo, and add like or comment to a post. Feed will serve the contents posted by the user's account and the accounts that are being 'followed' by the user. Profile will contain only the user's posts. You can delete a post if it's made by you, and delete a comment if it's made by you or it belongs to a post made by you.",Object(a.jsx)("br",{})," Also ",Object(a.jsx)("span",{className:"about__firebase",children:"firebase"})," storage is used to store profile pictures and post photos. It's not a huge thing, but probably I learned the MOST till now creating this project."]})})},be=Object(C.b)(null,{setAlert:$.setAlert,setUser:q})((function(e){var t=e.user,n=e.setAlert,c=e.setEditMode,r=e.setUser,o=e.changePassword,i=t.id,u=Object(s.useState)(t.name||""),l=Object(I.a)(u,2),d=l[0],b=l[1],j=Object(s.useState)(t.bio||""),p=Object(I.a)(j,2),m=p[0],f=p[1],h=Object(s.useState)(t.email||""),O=Object(I.a)(h,2),x=O[0],g=O[1],v=Object(s.useState)(null),N=Object(I.a)(v,2),w=N[0],S=N[1],y=Object(s.useState)(""),A=Object(I.a)(y,2),k=A[0],T=A[1],C=Object(s.useState)(""),E=Object(I.a)(C,2),L=E[0],D=E[1],F=function(){var e=Object(P.a)(z.a.mark((function e(t){var a,s,o;return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),e.prev=1,w){e.next=11;break}return e.next=5,_.post("/api/users/".concat(i),{name:d,bio:m,email:x});case 5:a=e.sent,n(a.data,"success"),r(i),c(!1),e.next=22;break;case 11:return(s=new FormData).append("name",d),s.append("bio",m),s.append("email",x),s.append("image",w),e.next=18,_.post("/api/users/".concat(i),s);case 18:o=e.sent,n(o.data,"success"),r(i),c(!1);case 22:e.next=27;break;case 24:e.prev=24,e.t0=e.catch(1),400===e.t0.response.status&&n(e.t0.response.data,"danger");case 27:case"end":return e.stop()}}),e,null,[[1,24]])})));return function(t){return e.apply(this,arguments)}}();return o?Object(a.jsxs)("form",{onSubmit:function(e){e.preventDefault(),L.length<6?n("New password must be at least 6 characters","warning"):_.post("/api/users/changepassword",{id:i,password:k,password2:L}).then((function(e){c(!1),n(e.data,"success")})).catch((function(e){n(e.response.data,"danger"),T(""),D("")}))},className:"profile__editForm mt-2 text-start",children:[Object(a.jsx)("input",{autoComplete:"username",type:"text",className:"d-none"}),Object(a.jsx)("input",{onChange:function(e){return T(e.target.value)},value:k,type:"password",className:"form-control",placeholder:"Old password",autoComplete:"old-password"}),Object(a.jsx)("input",{onChange:function(e){return D(e.target.value)},value:L,type:"password",className:"form-control",autoComplete:"new-password",placeholder:"New password"}),Object(a.jsx)("input",{type:"submit",value:"Update password",className:"btn btn-success"})]}):Object(a.jsxs)("form",{onSubmit:F,className:"profile__editForm mt-2",children:[Object(a.jsx)("input",{onChange:function(e){return b(e.target.value)},value:d,type:"text",className:"form-control",placeholder:"Name"}),Object(a.jsx)("input",{onChange:function(e){return g(e.target.value)},value:x,type:"email",className:"form-control",placeholder:"Email"}),Object(a.jsx)("input",{onChange:function(e){return f(e.target.value)},value:m,type:"text",className:"form-control",placeholder:"Bio"}),Object(a.jsxs)("div",{className:"d-flex mt-2 justify-content-between align-items-center",children:[Object(a.jsxs)("label",{className:"btn btn-primary",htmlFor:"imagefile",children:["Change DP ",Object(a.jsx)("i",{className:"fa fa-user","aria-hidden":"true"}),Object(a.jsx)("input",{onChange:function(e){return S(e.target.files[0])},type:"file",id:"imagefile",name:"image",className:"d-none"})]}),Object(a.jsx)("input",{type:"submit",value:"Save",className:"btn btn-success"})]})]})})),je=Object(C.b)((function(e){return{user:e.auth.user}}),{setAlert:$.setAlert,logout:Q})((function(e){var t=e.user,c=e.setAlert,r=e.match,o=e.logout,i=Object(s.useState)(!1),u=Object(I.a)(i,2),l=u[0],d=u[1],b=Object(s.useState)(!1),j=Object(I.a)(b,2),p=j[0],m=j[1],f=Object(s.useState)(null),h=Object(I.a)(f,2),O=h[0],x=h[1],g=Object(s.useState)(null),v=Object(I.a)(g,2),N=v[0],w=v[1],S=Object(s.useState)(null),y=Object(I.a)(S,2),A=y[0],k=y[1],T=Object(s.useState)(null),C=Object(I.a)(T,2),E=C[0],L=C[1],D=Object(s.useState)(!1),F=Object(I.a)(D,2),X=F[0],R=F[1],U=Object(s.useState)(""),J=Object(I.a)(U,2),H=J[0],B=J[1],Z=function(){var e=Object(P.a)(z.a.mark((function e(t){var n,a;return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_.delete("/api/posts/",{data:{postId:t}});case 2:n=e.sent,a=O.filter((function(e){return e.id!==t})),x(a),c(n.data,"success");case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();if(Object(s.useEffect)((function(){_.get("/api/users/".concat(r.params.id)).then((function(e){w(e.data),e.data.photo&&G(e.data.photo).then((function(e){return k(e)}))})),t&&(_.get("/api/posts/".concat(r.params.id)).then((function(e){return x(e.data)})),_.get("/api/following/".concat(t.id)).then((function(e){e.data.forEach((function(e){e.followee!=r.params.id||L(e)}))})))}),[t,r.params]),t&&N){var M=N.name,K=N.bio,W=N.email,q=t.is_staff;return Object(a.jsxs)("div",{className:"profile container pt-2",children:[Object(a.jsxs)("div",{className:"profile__header d-flex",children:[q&&Object(a.jsx)("button",{onClick:function(){_.delete("/api/users/".concat(r.params.id)).then((function(e){return console.log(e.data)})).catch((function(e){return console.log(e.response.data)}))},className:"btn btn-danger btn-sm position-absolute bottom-0 ",children:"DELETE ACCOUNT"}),t.id==r.params.id?Object(a.jsxs)("div",{className:"profile__edit d-flex flex-column",children:[Object(a.jsx)("button",{onClick:function(){m(!1),d(!l)},className:"btn btn-sm btn-info",children:"Edit Information"}),Object(a.jsx)("button",{onClick:function(){m(!0),d(!l)},className:"btn btn-sm btn-info mt-2",children:"Change Password"}),Object(a.jsx)("button",{onClick:function(){return R(!X)},className:"btn btn-sm btn-danger mt-2",children:"Delete Account"}),X&&Object(a.jsxs)("form",{onSubmit:function(e){if(e&&e.preventDefault(),H.length>0){var n={id:t.id,password:H};_.delete("/api/users/",{data:n}).then((function(e){o(),c(e.data,"danger")})).catch((function(e){return c(e.response.data,"danger")}))}},className:"profile__confirmDlt",children:[Object(a.jsx)("input",{autoComplete:"username",type:"text",className:"d-none"}),Object(a.jsx)("input",{value:H,onChange:function(e){return B(e.target.value)},type:"password",placeholder:"Enter password",autoComplete:"password"}),Object(a.jsx)("button",{type:"submit",className:"btn btn-danger",children:"DELETE!"})]})]}):Object(a.jsx)("div",{className:"profile__follow",children:E?Object(a.jsxs)("button",{onClick:function(){var e={followingId:E.id};_.delete("/api/following/",{data:e}).then((function(){return L(null)}))},className:"btn btn-lg btn-danger",children:["Unfollow ",Object(a.jsx)("i",{className:"fa fa-minus","aria-hidden":"true"})]}):Object(a.jsxs)("button",{onClick:function(){var e={followerId:t.id,followeeId:N.id};_.post("/api/following/",e).then((function(e){return L(e.data)}))},className:"btn btn-lg btn-info",children:["Follow ",Object(a.jsx)("i",{className:"fa fa-plus","aria-hidden":"true"})]})}),Object(a.jsx)("img",{className:"me-2",alt:t.name,src:A||n(33).default}),Object(a.jsxs)("div",{className:"d-flex flex-column",children:[Object(a.jsx)("p",{className:"profile__username",children:M}),Object(a.jsx)("p",{className:"profile__email",children:W})]})]}),Object(a.jsx)("div",{className:"profile__bio mt-2",children:K&&""!==K?Object(a.jsx)("p",{children:K}):Object(a.jsx)("p",{children:"Edit and add a bio"})}),l&&Object(a.jsx)(be,{changePassword:p,setEditMode:d,user:t}),Object(a.jsx)("div",{className:"feed_posts mt-4",children:O&&O.map((function(e){return Object(a.jsx)(ue,{handlePostDelete:Z,post:e},e.id)}))})]})}return Object(a.jsx)(re.a,{className:"m-auto",type:"cubes",color:"#c2c0b0",height:80,width:80})}));var pe=function(){return Object(a.jsx)(C.a,{store:T,children:Object(a.jsx)(i.a,{children:Object(a.jsxs)("div",{className:"App",children:[Object(a.jsx)(ee,{}),Object(a.jsxs)(u.d,{children:[Object(a.jsx)(u.b,{exact:!0,path:"/",component:E}),Object(a.jsx)(u.b,{exact:!0,path:"/login",component:te}),Object(a.jsx)(u.b,{exact:!0,path:"/signup",component:ne}),Object(a.jsx)(u.b,{exact:!0,path:"/about",component:de}),Object(a.jsx)(se,{exact:!0,path:"/feed",component:le}),Object(a.jsx)(se,{exact:!0,path:"/profile/:id",component:je})]})]})})})};o.a.render(Object(a.jsx)(c.a.StrictMode,{children:Object(a.jsx)(pe,{})}),document.getElementById("root"))}},[[82,1,2]]]);
//# sourceMappingURL=main.5e2678a6.chunk.js.map